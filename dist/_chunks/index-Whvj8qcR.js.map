{"version":3,"file":"index-Whvj8qcR.js","sources":["../../admin/src/components/Settings/index.tsx","../../admin/src/pages/Settings/index.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport pluginId from \"../../pluginId\";\nimport {\n  Main,\n  ContentLayout,\n  HeaderLayout,\n  Layout,\n  Loader,\n  TextInput,\n  Box,\n  Button,\n  // @ts-ignore\n} from \"@strapi/design-system\";\nimport { Check } from \"@strapi/icons\";\nimport useConfig from \"../../hooks/useConfig\";\nimport { AnErrorOccurred } from \"@strapi/helper-plugin\";\nimport { Config, UpdateConfig } from \"../../../../types\";\n\nexport default function Settings() {\n  const [saveConfig, setSaveConfig] = useState<UpdateConfig | undefined>();\n\n  const [inputFields, setInputFields] = useState<UpdateConfig | undefined>();\n\n  const [unsavedChanges, setUnsavedChanges] = useState(false);\n\n  const config = useConfig(saveConfig);\n\n  useEffect(() => {\n    if (!!config) {\n      setInputFields(config);\n    }\n  }, [config]);\n\n  useEffect(() => {\n    if (!inputFields || !config) return;\n\n    const inputFieldChanged = Object.entries(inputFields).some(\n      ([key, value]) => value !== config[key as keyof Config]\n    );\n\n    setUnsavedChanges(inputFieldChanged);\n  }, [inputFields]);\n\n  const onSave = () => {\n    setUnsavedChanges(false);\n\n    setSaveConfig(inputFields);\n  };\n\n  return (\n    <Box background=\"neutral100\">\n      <Layout>\n        <Main aria-busy={config === undefined}>\n          <HeaderLayout\n            primaryAction={\n              <Button\n                startIcon={<Check />}\n                loading={config === undefined}\n                disabled={!unsavedChanges}\n                onClick={onSave}\n              >\n                Save\n              </Button>\n            }\n            title=\"Strapi Leaflet Geoman Configuration\"\n            subtitle=\"Configure your Strapi Leaflet Geoman settings\"\n          />\n\n          <ContentLayout>\n            {config === null ? (\n              <AnErrorOccurred\n                content={{\n                  id: `${pluginId}.error`,\n                  defaultMessage: \"An error occurred\",\n                }}\n              />\n            ) : config === undefined || !inputFields ? (\n              <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n                <Loader />\n              </div>\n            ) : (\n              <Box\n                style={{\n                  gap: \"16px\",\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                }}\n                shadow=\"tableShadow\"\n                background=\"neutral0\"\n                paddingTop={6}\n                paddingLeft={7}\n                paddingRight={7}\n                paddingBottom={6}\n                hasRadius\n              >\n                <TextInput\n                  type=\"number\"\n                  id=\"latitude\"\n                  name=\"latitude\"\n                  placeholder=\"Add default map center latitude\"\n                  label=\"Default Map Latitude\"\n                  value={inputFields.defaultLatitude}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultLatitude: e.target.value,\n                    });\n                  }}\n                />\n\n                <TextInput\n                  type=\"number\"\n                  id=\"longitude\"\n                  name=\"longitude\"\n                  placeholder=\"Add default map center longitude\"\n                  label=\"Default Map Longitude\"\n                  value={inputFields.defaultLongitude}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultLongitude: e.target.value,\n                    });\n                  }}\n                />\n\n                <TextInput\n                  type=\"number\"\n                  id=\"zoom\"\n                  name=\"zoom\"\n                  placeholder=\"Add default map zoom level\"\n                  label=\"Default Map Zoom Level\"\n                  value={inputFields.defaultZoom}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultZoom: e.target.value,\n                    });\n                  }}\n                />\n\n                <TextInput\n                  type=\"text\"\n                  id=\"tileURL\"\n                  name=\"tileURL\"\n                  placeholder=\"Add default map tile URL\"\n                  label=\"Default Map Tile URL\"\n                  value={inputFields.defaultTileURL}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultTileURL: e.target.value,\n                    });\n                  }}\n                />\n\n                <TextInput\n                  type=\"text\"\n                  id=\"tileAttribution\"\n                  name=\"tileAttribution\"\n                  placeholder=\"Add default map tile Attribution\"\n                  label=\"Default Map Tile Attribution\"\n                  value={inputFields.defaultTileAttribution}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultTileAttribution: e.target.value,\n                    });\n                  }}\n                />\n\n                <TextInput\n                  type=\"text\"\n                  id=\"accessToken\"\n                  name=\"accessToken\"\n                  placeholder=\"Add default map tile Access Token\"\n                  label=\"Default Map Tile Access Token\"\n                  value={inputFields.defaultTileAccessToken}\n                  onChange={(e: any) => {\n                    setInputFields({\n                      ...inputFields,\n                      defaultTileAccessToken: e.target.value,\n                    });\n                  }}\n                />\n              </Box>\n            )}\n          </ContentLayout>\n        </Main>\n      </Layout>\n    </Box>\n  );\n}\n","/*\n *\n * SettingsPage\n *\n */\n\nimport pluginId from \"../../pluginId\";\nimport { CheckPagePermissions } from \"@strapi/helper-plugin\";\nimport Settings from \"../../components/Settings\";\n\nconst permissions = [{ action: `plugin::${pluginId}.config`, subject: null }];\n\nconst SettingsPage = () => {\n  return (\n    <CheckPagePermissions permissions={permissions}>\n      <Settings />\n    </CheckPagePermissions>\n  );\n};\n\nexport default SettingsPage;\n"],"names":["useState","useConfig","useEffect","jsx","Box","Layout","jsxs","Main","HeaderLayout","Button","Check","ContentLayout","AnErrorOccurred","pluginId","Loader","TextInput","CheckPagePermissions"],"mappings":"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"}